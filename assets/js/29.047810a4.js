(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{537:function(s,a,t){"use strict";t.r(a);var n={props:["slot-key"],mounted:function(){this.$nextTick(function(){this.$vuepress.$emit("AsyncMarkdownContentMounted",this.slotKey)})}},e=t(2),r=Object(e.a)(n,function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.slotKey}},[t("h1",{attrs:{id:"服务器端部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务器端部署","aria-hidden":"true"}},[s._v("#")]),s._v(" 服务器端部署")]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"centos7-3安装jdk1-8"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos7-3安装jdk1-8","aria-hidden":"true"}},[s._v("#")]),s._v(" centos7.3安装jdk1.8")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("如果有openjdk先卸载")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ java -version\n")])])]),t("p",[s._v("1.1 查看已有openjdk文件")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ rpm -qa "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("grep")]),s._v(" java\n")])])]),t("p",[s._v("1.2 删除相关openjdk文件")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ rpm -e --nodeps\n")])])]),t("p",[s._v("eg:")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ rpm -e --nodeps java-1.7.0-openjdk-1.7.0.111-2.6.7.8.el7.x86_64\n$ rpm -e --nodeps java-1.8.0-openjdk-1.8.0.102-4.b14.el7.x86_64\n$ rpm -e --nodeps java-1.8.0-openjdk-headless-1.8.0.102-4.b14.el7.x86_64\n$ rpm -e --nodeps java-1.7.0-openjdk-headless-1.7.0.111-2.6.7.8.el7.x86_64\n")])])])]),s._v(" "),t("li",[t("p",[s._v("下载jdk")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网下载地址"),t("OutboundLink")],1)])]),s._v(" "),t("li",[t("p",[s._v("解压")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf xxx.tar.gz\n")])])])]),s._v(" "),t("li",[t("p",[s._v("配置环境变量")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ vim /etc/profile\n")])])]),t("p",[s._v("在末尾加入")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("#set java env")]),s._v("\n"),t("span",{attrs:{class:"token function"}},[s._v("export")]),s._v(" JAVA_HOME"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/jdk1.8.0_221\n"),t("span",{attrs:{class:"token function"}},[s._v("export")]),s._v(" CLASSPATH"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(".:"),t("span",{attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/jre/lib/rt.jar:"),t("span",{attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/lib/dt.jar:"),t("span",{attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/lib/tools.jar\n"),t("span",{attrs:{class:"token function"}},[s._v("export")]),s._v(" PATH"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/bin:"),t("span",{attrs:{class:"token variable"}},[s._v("$PATH")]),s._v("\n")])])]),t("p",[s._v("修改完profile文件，执行生效命令")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("source")]),s._v(" /ect/profile\n")])])])]),s._v(" "),t("li",[t("p",[s._v("验证安装成功")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ java -version\njava version "),t("span",{attrs:{class:"token string"}},[s._v('"1.8.0_221"')]),s._v("\nJava"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TM"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" SE Runtime Environment "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("build 1.8.0_221-b11"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nJava HotSpot"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TM"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 64-Bit Server VM "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("build 25.221-b11, mixed mode"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])])])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"centos7安装mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos7安装mysql","aria-hidden":"true"}},[s._v("#")]),s._v(" centos7安装mysql")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("获取官方yum源")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://dev.mysql.com/downloads/repo/yum/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网yum源地址"),t("OutboundLink")],1)])]),s._v(" "),t("li",[t("p",[s._v("下载")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("## mysql5.7")]),s._v("\n$ "),t("span",{attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm\n"),t("span",{attrs:{class:"token comment"}},[s._v("## mysql8")]),s._v("\n$ "),t("span",{attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://repo.mysql.com//mysql80-community-release-el7-1.noarch.rpm\n")])])])]),s._v(" "),t("li",[t("p",[s._v("安装源")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ yum -y localinstall mysql80-community-release-el7-1.noarch.rpm\n")])])])]),s._v(" "),t("li",[t("p",[s._v("在线安装Mysql")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ yum -y "),t("span",{attrs:{class:"token function"}},[s._v("install")]),s._v(" mysql-community-server\n")])])])]),s._v(" "),t("li",[t("p",[s._v("启动mysql")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ systemctl start mysqld\n")])])])])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"mysql配置相关"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql配置相关","aria-hidden":"true"}},[s._v("#")]),s._v(" mysql配置相关")]),s._v(" "),t("h4",{attrs:{id:"设置开机启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置开机启动","aria-hidden":"true"}},[s._v("#")]),s._v(" 设置开机启动")]),s._v(" "),t("ol",[t("li",[s._v("centos :"),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ systemctl "),t("span",{attrs:{class:"token function"}},[s._v("enable")]),s._v(" mysqld\n$ systemctl daemon-reload\n")])])])])]),s._v(" "),t("h4",{attrs:{id:"查看mysql-root初始密码并修改"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看mysql-root初始密码并修改","aria-hidden":"true"}},[s._v("#")]),s._v(" 查看mysql root初始密码并修改")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("mysql安装完成后,在"),t("code",[s._v("/var/log/mysqld.log")]),s._v("文件中生成了临时密码")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("cat")]),s._v(" /var/log/mysqld.log\n")])])])]),s._v(" "),t("li",[t("p",[s._v("进入mysql命令行")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ mysql -u root -p\n")])])])]),s._v(" "),t("li",[t("p",[s._v("修改密码")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("mysql"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" ALTER USER "),t("span",{attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),t("span",{attrs:{class:"token string"}},[s._v("'localhost'")]),s._v(" IDENTIFIED BY "),t("span",{attrs:{class:"token string"}},[s._v("'newpassword'")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK, 0 rows affected "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0.00 sec"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("p",[s._v("ps: mysql5.7默认密码策略要求密码必须是大小写字母数字特殊字母的组合，至少8位")])])]),s._v(" "),t("h4",{attrs:{id:"设置mysql允许远程登录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置mysql允许远程登录","aria-hidden":"true"}},[s._v("#")]),s._v(" 设置mysql允许远程登录")]),s._v(" "),t("ol",[t("li",[s._v("进入mysql命令行"),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("mysql"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" GRANT ALL PRIVILEGES ON *.* TO "),t("span",{attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),t("span",{attrs:{class:"token string"}},[s._v("'%'")]),s._v(" IDENTIFIED BY "),t("span",{attrs:{class:"token string"}},[s._v("'password'")]),s._v(" WITH GRANT OPTION"),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK, 0 rows affected, 1 warning "),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("0.01 sec"),t("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),s._v("ps: 防火墙开放3306端口"),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ firewall-cmd --zone"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("3306/tcp --permanent\n$ firewall-cmd --reload\n")])])])])]),s._v(" "),t("h4",{attrs:{id:"设置mysql默认编码为utf8"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置mysql默认编码为utf8","aria-hidden":"true"}},[s._v("#")]),s._v(" 设置mysql默认编码为utf8")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("修改"),t("code",[s._v("/etc/my.cnf")]),s._v("配置文件，在[mysqld]下添加编码配置")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/my.cnf\n\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ncharacter_set_server"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8\ninit_connect"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token string"}},[s._v("'SET NAMES utf8'")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("重启mysql服务")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ systemctl restart mysqld\n")])])])]),s._v(" "),t("li",[t("p",[s._v("查看编码是否修改成功")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("mysql"),t("span",{attrs:{class:"token operator"}},[s._v(">")]),s._v(" show variables like "),t("span",{attrs:{class:"token string"}},[s._v("'%character%'")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])])]),s._v(" "),t("h4",{attrs:{id:"设置mysql忽略表名大小写"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置mysql忽略表名大小写","aria-hidden":"true"}},[s._v("#")]),s._v(" 设置mysql忽略表名大小写")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("修改"),t("code",[s._v("/etc/my.cnf")]),s._v("配置文件，在[mysqld]下添加配置")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/my.cnf\n\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nlower_case_table_names"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("1\n")])])])]),s._v(" "),t("li",[t("p",[s._v("如果不清楚my.cnf配置文件位置,可以如下操作：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("//查看mysql的命令路径\n$ "),t("span",{attrs:{class:"token function"}},[s._v("which")]),s._v(" mysqld \t\n/usr/sbin/mysqld\n\n//查看mysql读取的默认配置文件位置\n$ /usr/sbin/mysqld --verbose --help "),t("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("grep")]),s._v(" -A 1 "),t("span",{attrs:{class:"token string"}},[s._v("'Default options'")]),s._v(" \nDefault options are "),t("span",{attrs:{class:"token function"}},[s._v("read")]),s._v(" from the following files "),t("span",{attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the given order:\n/etc/my.cnf /etc/mysql/my.cnf /usr/etc/my.cnf ~/.my.cnf\n")])])]),t("p",[s._v("ps: 多个配置文件，前面的文件不存在才会读取后面的，编辑文件，如果发现是新文件，则编辑后面的文件")])]),s._v(" "),t("li",[t("p",[s._v("重启mysql服务")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("service")]),s._v(" mysqld restart\n")])])])])]),s._v(" "),t("h4",{attrs:{id:"修改mysql-group-by限制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改mysql-group-by限制","aria-hidden":"true"}},[s._v("#")]),s._v(" 修改mysql group by限制")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("临时解决办法：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("进入mysql命令行")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ mysql -uroot -p\n\n"),t("span",{attrs:{class:"token keyword"}},[s._v("set")]),s._v(" session sql_mode"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token string"}},[s._v("'STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION'")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nSET GLOBAL sql_mode"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SELECT REPLACE"),t("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("@@sql_mode,"),t("span",{attrs:{class:"token string"}},[s._v("'ONLY_FULL_GROUP_BY'")]),s._v(","),t("span",{attrs:{class:"token string"}},[s._v("''")]),t("span",{attrs:{class:"token punctuation"}},[s._v("))")]),t("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])])])]),s._v(" "),t("li",[t("p",[s._v("永久解决办法：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("修改"),t("code",[s._v("/etc/my.cnf")]),s._v("配置文件，在[mysqld]下添加配置")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/my.cnf\n\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nsql_mode"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\n")])])])]),s._v(" "),t("li",[t("p",[s._v("重启mysql服务")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("service")]),s._v(" mysqld restart\n")])])])])])])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"centos7-3安装tomcat8"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos7-3安装tomcat8","aria-hidden":"true"}},[s._v("#")]),s._v(" centos7.3安装tomcat8")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("下载tomcat "),t("a",{attrs:{href:"http://tomcat.apache.org/download-80.cgi",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方下载地址"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://mirrors.tuna.tsinghua.edu.cn/apache/tomcat/tomcat-8/v8.5.47/bin/apache-tomcat-8.5.47.tar.gz\n")])])])]),s._v(" "),t("li",[t("p",[s._v("解压")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf apache-tomcat-8.5.47.tar.gz \n")])])]),t("p",[s._v("ps：防火墙开放端口")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ firewall-cmd --zone"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("80/tcp --permanent\n$ firewall-cmd --reload\n")])])])])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"centos7-3安装redis4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos7-3安装redis4","aria-hidden":"true"}},[s._v("#")]),s._v(" centos7.3安装redis4")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("下载redis安装包")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://download.redis.io/releases/redis-4.0.6.tar.gz\n")])])])]),s._v(" "),t("li",[t("p",[s._v("解压")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf redis-4.0.6.tar.gz\n")])])])]),s._v(" "),t("li",[t("p",[s._v("yum安装gcc依赖")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ yum "),t("span",{attrs:{class:"token function"}},[s._v("install")]),s._v(" gcc\n")])])])]),s._v(" "),t("li",[t("p",[s._v("跳转到redis解压目录下编译安装")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("cd")]),s._v(" redis-4.0.6\n$ "),t("span",{attrs:{class:"token function"}},[s._v("make")]),s._v(" MALLOC"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("libc　\n\n"),t("span",{attrs:{class:"token comment"}},[s._v("#将redis-4.0.6/src目录下的文件加到/usr/local/bin目录")]),s._v("\n$ "),t("span",{attrs:{class:"token function"}},[s._v("cd")]),s._v(" src "),t("span",{attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("启动redis")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("按需修改redis.conf文件"),t("br"),s._v("\n是否开启保护模式\t"),t("code",[s._v("protected-mode no/yes")])]),s._v(" "),t("p",[s._v("是否指定ip可访问\t"),t("code",[s._v("bind 127.0.0.1/0.0.0.0")]),s._v("\nps: 防火墙开放端口")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ firewall-cmd --zone"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("public --add-port"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("6379/tcp --permanent\n$ firewall-cmd --reload\n")])])])]),s._v(" "),t("li",[t("p",[s._v("切换到redis的src目录下直接启动")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("cd")]),s._v(" src\n$ ./redis-server\n")])])])]),s._v(" "),t("li",[t("p",[s._v("后台进程启动")])]),s._v(" "),t("li",[t("p",[s._v("修改redis.conf文件\n​\t"),t("code",[s._v("daemonize no")]),s._v(" 改为 "),t("code",[s._v("daemonize yes")])])]),s._v(" "),t("li",[t("p",[s._v("指定redis.conf文件启动")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ ./redis-server /home/redis-4.0.6/redis.conf\n")])])])])])]),s._v(" "),t("li",[t("p",[s._v("设置redis开机自启动  "),t("a",{attrs:{href:"https://www.cnblogs.com/zuidongfeng/p/8032505.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考资料"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[t("p",[s._v("在/etc目录下新建redis目录")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /etc/redis\n")])])])]),s._v(" "),t("li",[t("p",[s._v("将"),t("code",[s._v("redis.conf")]),s._v("文件复制一份到"),t("code",[s._v("/etc/redis")]),s._v("目录下，并命名为"),t("code",[s._v("6379.conf")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("cp")]),s._v(" /home/redis-4.0.6/redis.conf /etc/redis/6379.conf\n")])])])]),s._v(" "),t("li",[t("p",[s._v("将redis的启动脚本复制一份放到"),t("code",[s._v("/etc/init.d")]),s._v("目录下，命名为"),t("code",[s._v("redisd")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("cp")]),s._v(" /home/redis-4.0.6/utils/redis_init_script /etc/init.d/redisd\n")])])])]),s._v(" "),t("li",[t("p",[s._v("设置redis开机自启动")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("cd")]),s._v(" /etc/init.d\n$ "),t("span",{attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" redisd on\n"),t("span",{attrs:{class:"token function"}},[s._v("service")]),s._v(" redisd does not support "),t("span",{attrs:{class:"token function"}},[s._v("chkconfig")]),s._v("　\n")])])])]),s._v(" "),t("li",[t("p",[s._v("如果如上提示不支持chkconfig\n使用vim编辑redisd文件，在第一行"),t("code",[s._v("#!/bin/sh")]),s._v("之后加入如下两行注释，保存退出")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ vim /etc/init.d/redisd\n\n"),t("span",{attrs:{class:"token comment"}},[s._v("#!/bin/sh")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("#chkconfig:   2345 90 10")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("#description:  Redis is a persistent key-value database")]),s._v("\n")])])]),t("p",[s._v("ps: 注释的意思是，redis服务必须在运行级2，3，4，5下被启动或关闭，启动的优先级是90，关闭的优先级是10。")])]),s._v(" "),t("li",[t("p",[s._v("再次执行开机自启命令即可")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" redisd on\n")])])]),t("p",[s._v("ps: 现在可以直接已服务的形式启动和关闭redis了"),t("br"),s._v("\n​\t启动："),t("code",[s._v("service redisd start")]),t("br"),s._v("\n​    停止："),t("code",[s._v("service redisd stop")])])])])])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"centos7-3安装nginx-离线安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos7-3安装nginx-离线安装","aria-hidden":"true"}},[s._v("#")]),s._v(" centos7.3安装nginx [离线安装]")]),s._v(" "),t("p",[s._v("​\t"),t("a",{attrs:{href:"https://blog.csdn.net/qq_38591756/article/details/82829902",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考资料"),t("OutboundLink")],1)]),s._v(" "),t("ol",[t("li",[t("p",[s._v("下载安装包和依赖")]),s._v(" "),t("p",[s._v("SSL功能需要openssl库，下载地址：http://www.openssl.org/"),t("br"),s._v("\ngzip模块需要zlib库，下载地址：http://www.zlib.net/"),t("br"),s._v("\nrewrite模块需要pcre库，下载地址：http://www.pcre.org/"),t("br"),s._v("\nNginx的安装包：下载地址为：http://nginx.org/en/download.html")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://www.openssl.org/source/openssl-1.1.1.tar.gz\n$ "),t("span",{attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://www.zlib.net/zlib-1.2.11.tar.gz\n$ "),t("span",{attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://ftp.pcre.org/pub/pcre/pcre-8.33.tar.gz\n$ "),t("span",{attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://nginx.org/download/nginx-1.14.0.tar.gz\n")])])])]),s._v(" "),t("li",[t("p",[s._v("解压")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf openssl-1.1.1.tar.gz\n$ "),t("span",{attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf zlib-1.2.11.tar.gz\n$ "),t("span",{attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf pcre-8.33.tar.gz\n$ "),t("span",{attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf nginx-1.14.0.tar.gz\n")])])])]),s._v(" "),t("li",[t("p",[s._v("安装依赖")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{attrs:{class:"token comment"}},[s._v("#新环境需要安装gcc gcc-c++ make")]),s._v("\n$ yum "),t("span",{attrs:{class:"token function"}},[s._v("install")]),s._v(" -y gcc gcc-c++ "),t("span",{attrs:{class:"token function"}},[s._v("make")]),s._v("\n\n"),t("span",{attrs:{class:"token comment"}},[s._v("#安装PCRE库")]),s._v("\n$ "),t("span",{attrs:{class:"token function"}},[s._v("cd")]),s._v(" pcre-8.33\n$ ./configure\n$ "),t("span",{attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("install")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("#安装SSL库")]),s._v("\n$ "),t("span",{attrs:{class:"token function"}},[s._v("cd")]),s._v(" openssl-1.1.1\n$ ./config\n$ "),t("span",{attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("install")]),s._v("\n"),t("span",{attrs:{class:"token comment"}},[s._v("#安装zlib库")]),s._v("\n$ "),t("span",{attrs:{class:"token function"}},[s._v("cd")]),s._v(" zlib-1.2.11\n$ ./configure\n$ "),t("span",{attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("安装nginx")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("cd")]),s._v(" nginx-1.14.0\n\n$ ./configure --user"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("nobody --group"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("nobody --prefix"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx --with-http_stub_status_module --with-http_gzip_static_module --with-http_realip_module --with-http_sub_module --with-http_ssl_module --with-pcre"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/nginx/pcre-8.33 --with-zlib"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/nginx/zlib-1.2.11 --with-openssl"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("/home/nginx/openssl-1.1.1\n\n$ "),t("span",{attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])]),t("p",[s._v("ps: 如果默认没有创建logs目录，则需要手动创建，否则会报错")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /usr/local/nginx/logs\n")])])])]),s._v(" "),t("li",[t("p",[s._v("配置开机启动")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("切换到"),t("code",[s._v("/lib/systemd/system")]),s._v("目录,创建"),t("code",[s._v("nginx.service")]),s._v("文件，内容如下：")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("cd")]),s._v(" /lib/systemd/system\n\n$ vim nginx.service\n\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nDescription"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\nAfter"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("network.target\n\n"),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nType"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("forking\nExecStart"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/sbin/nginx\nExecReload"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/sbin/nginx reload\nExecStop"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/sbin/nginx quit\nPrivateTmp"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n \n"),t("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),t("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nWantedBy"),t("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v("multi-user.target\n")])])])]),s._v(" "),t("li",[t("p",[s._v("保存并退出，使用下面命令设置开机启动")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ systemctl "),t("span",{attrs:{class:"token function"}},[s._v("enable")]),s._v(" nginx.service\n")])])]),t("p",[s._v("ps: "),t("code",[s._v("/usr/local/nginx/conf/nginx.conf")]),s._v("文件是nginx默认的配置文件，对其修改即可")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ systemctl start nginx.service  "),t("span",{attrs:{class:"token comment"}},[s._v("#启动，也可以使用sbin/nginx启动")]),s._v("\n$ systemctl stop nginx.service  "),t("span",{attrs:{class:"token comment"}},[s._v("#结束nginx ")]),s._v("\n$ systemctl restart nginx.service  "),t("span",{attrs:{class:"token comment"}},[s._v("#重启，可使用sbin/nginx -s reload")]),s._v("\n")])])])])])])]),s._v(" "),t("hr"),s._v(" "),t("p",[s._v("###centos7.3安装nginx [在线安装]")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("添加rpm源")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm\n")])])])]),s._v(" "),t("li",[t("p",[s._v("通过yum search nginx看看是否已经添加源成功。如果成功则执行命令安装Nginx")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{attrs:{class:"token function"}},[s._v("install")]),s._v(" -y nginx\n")])])])]),s._v(" "),t("li",[t("p",[s._v("启动Nginx并设置开机自动运行")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("$ "),t("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start nginx.service\n$ "),t("span",{attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl "),t("span",{attrs:{class:"token function"}},[s._v("enable")]),s._v(" nginx.service\n")])])])])])])},[],!1,null,null,null);r.options.__file="server-deploy.md";a.default=r.exports}}]);